# OpDev-910A

## 项目目标、验证方式、进度

| 序号 | 目标 | 验证方式 | 进度 |
| - | - | - | - |
| 1 | 支持aclnnSwiGlu算子 | aclnnSwiGlu算子单算子运行通过/在运行Qwen3时可在图模式检测到aclnnSwiGlu算子 | 第1-2周 |
| 2 | 支持key_cache等算子 | 跑通DeepSeek-R1模型 | 第2-3周 |
| 3 | 开发小模型所需融合算子 | - | 第4-5周 |

## 统一开发条件

### 开发硬件环境
```bash
uname -a
# Linux bms-jishuxiaozu 4.19.36-vhulk1907.1.0.h1665.eulerosv2r8.aarch64 #1 SMP Sun Nov 10 17:11:17 UTC 2024 aarch64 aarch64 aarch64 GNU/Linux
npu-smi info # 910A 八卡
+------------------------------------------------------------------------------------------------+
| npu-smi 24.1.0                   Version: 24.1.0                                               |
+---------------------------+---------------+----------------------------------------------------+
| NPU   Name                | Health        | Power(W)    Temp(C)           Hugepages-Usage(page)|
| Chip                      | Bus-Id        | AICore(%)   Memory-Usage(MB)  HBM-Usage(MB)        |
+===========================+===============+====================================================+
| 0     910B                | OK            | 70.0        34                0    / 0             |
| 0                         | 0000:C1:00.0  | 0           1197 / 13553      1365 / 32768         |
+===========================+===============+====================================================+
| 1     910B                | OK            | 66.9        34                0    / 0             |
| 0                         | 0000:81:00.0  | 0           2411 / 15665      4    / 32768         |
+===========================+===============+====================================================+
| 2     910B                | OK            | 69.8        34                0    / 0             |
| 0                         | 0000:41:00.0  | 0           2306 / 15665      4    / 32768         |
+===========================+===============+====================================================+
| 3     910B                | OK            | 67.2        33                0    / 0             |
| 0                         | 0000:01:00.0  | 0           2472 / 15567      3    / 32768         |
+===========================+===============+====================================================+
| 4     910B                | OK            | 68.9        33                0    / 0             |
| 0                         | 0000:C2:00.0  | 0           2904 / 13553      3    / 32768         |
+===========================+===============+====================================================+
| 5     910B                | OK            | 66.3        34                0    / 0             |
| 0                         | 0000:82:00.0  | 0           1694 / 15665      5    / 32768         |
+===========================+===============+====================================================+
| 6     910B                | OK            | 70.1        34                0    / 0             |
| 0                         | 0000:42:00.0  | 0           1987 / 15665      5    / 32768         |
+===========================+===============+====================================================+
| 7     910B                | OK            | 65.6        33                0    / 0             |
| 0                         | 0000:02:00.0  | 0           1777 / 15567      4    / 32768         |
+===========================+===============+====================================================+
```

### 远程连接方式
ssh -i /path/to/key.pem root@223.244.40.1

### 开发容器环境
quay.io/ascend/vllm-ascend:v0.9.1rc1 openeuler，具体见[链接](https://vllm-ascend.readthedocs.io/en/latest/quick_start.html)

## 项目结构
MindIE-CANN: 不使用aclnnSwiGlu算子跑通qwen3模型的所需代码和流程
vLLM-CANN: 开发aclnnSwiGlu算子跑通qwen3模型的所需代码和流程



